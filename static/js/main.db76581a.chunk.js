(this["webpackJsonploft-taxi"]=this["webpackJsonploft-taxi"]||[]).push([[0],{144:function(e,t,r){},145:function(e,t,r){},148:function(e,t,r){},152:function(e,t,r){},156:function(e,t,r){},158:function(e,t,r){},160:function(e,t,r){},161:function(e,t,r){},162:function(e,t,r){},199:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(15),a=r.n(c),s=(r(143),r(144),r(19)),o=(r(145),r(2)),i=function(e){var t=e.children;return Object(o.jsx)("div",{className:"card",children:t})},l=r(8),u=r(33),j=(r(148),r(229)),d=r(226),b=Object(d.a)({gap:{gap:"0 24px"},formControl:{width:"calc(50% - 12px)"},btnPreloader:{position:"absolute",top:"calc(50% - 12.5px)",left:"calc(50% - 12.5px)",marginRight:"16px",color:"#FDBF5A"}}),O=function(e){var t=e.children,r=e.onClick,n=e.disabled,c=e.preloader,a=b();return Object(o.jsxs)("button",{onClick:r,disabled:n,className:"primary-btn ".concat(n?"primary-btn--disabled":""),children:[c?Object(o.jsx)(j.a,{size:25,className:a.btnPreloader}):null,t]})},m=r(31),f=(r(152),function(e){var t=e.children;return Object(o.jsx)("span",{className:"error-message",children:t})}),h=r(18),x=r(39),p="SET_AUTH",g="SET_ERROR",v="LOGIN",S="LOGOUT",y={setAuth:function(e){return{type:p,payload:e}},login:function(){return{type:v}},logout:function(){return{type:S}},setError:function(e){return{type:g,payload:e}}},_="FETCH_USER_CARD",N="FETCH_CARD",C="SET_CARD",w="SET_SUCCESS",E="SET_ERROR",k={fetchUserCard:function(e){return{type:_,payload:e}},setUserCard:function(e){return{type:C,payload:e}},fetchCard:function(){return{type:N}},setSuccess:function(e){return{type:w,payload:e}},setError:function(e){return{type:E,payload:e}}},R="SET_ADDRESSES",T="FETCH_ADDRESSES",I="FETCH_ROUTES",L="SET_ROUTES",A={setAddresses:function(e){return{type:R,payload:e}},fetchAddressList:function(){return{type:T}},getRoutes:function(e){return{type:I,payload:e}},setRoutes:function(e){return{type:L,payload:e}}},F="SET_REGISTRATION",D="FETCH_REGISTRATION",U="SET_ERROR",H={setRegistration:function(e){return{type:F,payload:e}},fetchRegistration:function(){return{type:D}},setError:function(e){return{type:U,payload:e}}},W=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},y),k),A),H),q=function(){var e=Object(h.b)();return Object(x.bindActionCreators)(W,e)},M=r(231),P=r(242),z=r(232),G=r(239),Z=r(76),B=r.n(Z),K=r(41),J=Object(K.a)((function(e){return e.isLoggedIn}),(function(e){return e})),Y=Object(K.a)((function(e){return e.isRegisterIn}),(function(e){return e})),V=Object(K.a)((function(e){return e.isLoading}),(function(e){return e})),X=Object(K.a)((function(e){return e.isSuccess}),(function(e){return e})),$=Object(K.a)((function(e){return e.error}),(function(e){return e})),Q=Object(K.a)((function(e){return e.coordinates}),(function(e){return e})),ee=Object(K.a)((function(e){return e.addresses}),(function(e){return e})),te=Object(K.a)((function(e){return e.card}),(function(e){return e})),re=function(){var e=Object(u.b)(),t=e.register,r=e.handleSubmit,n=e.formState.errors,c=q().setAuth,a=Object(h.c)((function(e){return V(e.auth)})),s=Object(h.c)((function(e){return $(e.auth)})),i=B()({bindTo:document&&document.getElementById("alert-portal")}).Portal;console.log(n);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("form",{className:"form",onSubmit:r((function(e){c(e)})),children:[Object(o.jsx)("div",{className:"form__title",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"email",children:"Email*"}),Object(o.jsx)(z.a,Object(l.a)({id:"email"},t("email",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},pattern:{value:/^\S+@\S+$/i,message:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}}))),n.email&&Object(o.jsx)(f,{children:n.email.message})]}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c*"}),Object(o.jsx)(z.a,Object(l.a)({id:"password",type:"password"},t("password",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}}))),n.password&&Object(o.jsx)(f,{children:n.password.message})]}),Object(o.jsx)("a",{href:"#",className:"form__restore-password",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(o.jsx)(O,{preloader:a,disabled:a,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(o.jsxs)("div",{className:"form__redirect-btn",children:["\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(o.jsx)(m.b,{to:he.registration,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]}),s&&Object(o.jsx)(i,{children:Object(o.jsx)(G.a,{severity:"error",children:s})})]})},ne=r(235),ce=function(){var e=Object(u.b)(),t=e.register,r=e.handleSubmit,n=e.formState.errors,c=q().setRegistration,a=b(),s=Object(h.c)((function(e){return Y(e.registration)})),i=Object(h.c)((function(e){return V(e.registration)})),j=Object(h.c)((function(e){return $(e.registration)})),d=B()({bindTo:document&&document.getElementById("alert-portal")}).Portal;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("form",{className:"form form--registration",onSubmit:r((function(e){c(e)})),children:[Object(o.jsx)("div",{className:"form__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"email",children:"Email*"}),Object(o.jsx)(z.a,Object(l.a)({id:"email"},t("email",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},pattern:{value:/^\S+@\S+$/i,message:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email"}}))),n.email&&Object(o.jsx)(f,{children:n.email.message})]}),Object(o.jsxs)(ne.a,{row:!0,className:a.gap,children:[Object(o.jsxs)(M.a,{margin:"normal",className:a.formControl,children:[Object(o.jsx)(P.a,{htmlFor:"name",children:"\u0418\u043c\u044f*"}),Object(o.jsx)(z.a,Object(l.a)({id:"name"},t("name",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}}))),n.name&&Object(o.jsx)(f,{children:n.name.message})]}),Object(o.jsxs)(M.a,{margin:"normal",className:a.formControl,children:[Object(o.jsx)(P.a,{htmlFor:"surname",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f*"}),Object(o.jsx)(z.a,Object(l.a)({id:"surname"},t("surname",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}}))),n.surname&&Object(o.jsx)(f,{children:n.surname.message})]})]}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"password",children:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c*"}),Object(o.jsx)(z.a,Object(l.a)({id:"password",type:"password"},t("password",{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}}))),n.password&&Object(o.jsx)(f,{children:n.password.message})]}),Object(o.jsx)(O,{preloader:i,disabled:i,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(o.jsxs)("div",{className:"form__redirect-btn",children:["\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(o.jsx)(m.b,{to:he.login,children:"\u0412\u043e\u0439\u0442\u0438"})]})]}),j&&Object(o.jsx)(d,{children:Object(o.jsx)(G.a,{severity:"error",children:j})}),s&&Object(o.jsx)(d,{children:Object(o.jsx)(G.a,{severity:"success",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e"})})]})},ae=(r(156),r(21)),se=r(238),oe=r(245),ie=function(){var e=Object(u.b)(),t=e.register,r=e.handleSubmit,c=Object(h.c)((function(e){return ee(e.order)})),a=Object(h.c)((function(e){return V(e.order)})),s=Object(n.useState)(""),j=Object(ae.a)(s,2),d=j[0],b=j[1],m=Object(n.useState)(""),f=Object(ae.a)(m,2),x=f[0],p=f[1],g=q().getRoutes,v=function(e){"from"===e.target.name?b(e.target.value):p(e.target.value)};return Object(o.jsx)(i,{children:Object(o.jsxs)("form",{className:"form form--order",onSubmit:r((function(e){g(e)})),children:[Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{id:"from",children:"\u041e\u0442\u043a\u0443\u0434\u0430"}),Object(o.jsx)(se.a,Object(l.a)(Object(l.a)({labelId:"from",id:"from",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null}},t("from")),{},{value:d,onChange:v,children:c.map((function(e){return x!==e&&Object(o.jsx)(oe.a,{value:e,children:e},e)}))}))]}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{id:"to",children:"\u041a\u0443\u0434\u0430"}),Object(o.jsx)(se.a,Object(l.a)(Object(l.a)({labelId:"to",id:"to",MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null}},t("to")),{},{value:x,onChange:v,children:c.map((function(e){return d!==e&&Object(o.jsx)(oe.a,{value:e,children:e},e)}))}))]}),Object(o.jsx)(O,{preloader:a,disabled:!d||!x||a,children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"})]})})},le=function(){var e=q().setRoutes;return Object(o.jsx)(i,{children:Object(o.jsxs)("div",{className:"order-confirm",children:[Object(o.jsx)("h2",{className:"order-confirm__title",children:"\u0417\u0430\u043a\u0430\u0437 \u0440\u0430\u0437\u043c\u0435\u0449\u0435\u043d"}),Object(o.jsx)("p",{className:"order-confirm__descr",children:"\u0412\u0430\u0448\u0435 \u0442\u0430\u043a\u0441\u0438 \u0443\u0436\u0435 \u0435\u0434\u0435\u0442 \u043a \u0432\u0430\u043c. \u041f\u0440\u0438\u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 10 \u043c\u0438\u043d\u0443\u0442."}),Object(o.jsx)(O,{onClick:function(){e([])},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"})]})})},ue={ACCESS_TOKEN:"ACCESS_TOKEN",AUTH:"AUTH",IS_CARD:"IS_CARD"},je=(r(158),r(25)),de=r(237),be=r(119),Oe=r(87),me=r.n(Oe),fe=function(){var e=Object(h.c)((function(e){return te(e.profile)})),t=Object(h.c)((function(e){return V(e.profile)})),r=Object(u.b)(),c=r.handleSubmit,a=r.formState.errors,s=r.control,i=(r.register,Object(n.useState)(e?e.expiryDate:new Date)),j=Object(ae.a)(i,2),d=j[0],m=j[1],x=Object(n.useState)(e?e.cardName:""),p=Object(ae.a)(x,2),g=p[0],v=p[1],S=Object(n.useState)(e?e.cardNumber:""),y=Object(ae.a)(S,2),_=y[0],N=y[1],C=Object(n.useState)(e?e.cvc:""),w=Object(ae.a)(C,2),E=w[0],k=w[1],R=q().fetchUserCard,T=b();return Object(o.jsx)("div",{className:"profile__form",children:Object(o.jsxs)("form",{onSubmit:c((function(e){e.token=localStorage.getItem(ue.ACCESS_TOKEN),R(e)})),children:[Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"cardName",children:"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430*"}),Object(o.jsx)(u.a,{name:"cardName",control:s,rules:{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}},render:function(e){var t=e.field.onChange;return Object(o.jsx)(z.a,{id:"cardName",value:g,onChange:function(e){t(e.target.value),v(e.target.value)}})}}),a.cardName&&Object(o.jsx)(f,{children:a.cardName.message})]}),Object(o.jsxs)(M.a,{fullWidth:!0,margin:"normal",children:[Object(o.jsx)(P.a,{htmlFor:"cardNumber",children:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b*"}),Object(o.jsx)(u.a,{control:s,render:function(e){var t=e.field.onChange;return Object(o.jsx)(me.a,{mask:"9999 9999 9999 9999",value:_,maskChar:" ",onChange:function(e){t(e.target.value),N(e.target.value)},children:function(e){return Object(o.jsx)(z.a,Object(l.a)({id:"cardNumber"},e))}})},name:"cardNumber",rules:{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},minLength:{value:16,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 16 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"}}}),a.cardNumber&&Object(o.jsx)(f,{children:a.cardNumber.message})]}),Object(o.jsxs)(ne.a,{row:!0,className:T.gap,children:[Object(o.jsxs)(M.a,{margin:"normal",className:T.formControl,children:[Object(o.jsx)(je.a,{utils:be.a,children:Object(o.jsx)(u.a,{name:"expiryDate",control:s,rules:{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"}},render:function(e){var t=e.field.onChange;return Object(o.jsx)(de.a,{autoOk:!0,variant:"dialog",openTo:"year",views:["year","month"],label:"MM/YY",format:"MM/yy",value:d,minDate:new Date,onChange:function(e){t(e),m(e)}})}})}),a.expiryDate&&Object(o.jsx)(f,{children:a.expiryDate.message})]}),Object(o.jsxs)(M.a,{margin:"normal",className:T.formControl,children:[Object(o.jsx)(P.a,{htmlFor:"cvc",children:"CVC*"}),Object(o.jsx)(u.a,{control:s,render:function(e){var t=e.field,r=t.onChange;t.ref;return Object(o.jsx)(me.a,{mask:"999",value:E,maskChar:" ",onChange:function(e){r(e.target.value),k(e.target.value)},children:function(){return Object(o.jsx)(z.a,{id:"cvc"})}})},name:"cvc",rules:{required:{value:!0,message:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435"},minLength:{value:3,message:"\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430"}}}),a.cvc&&Object(o.jsx)(f,{children:a.cvc.message})]})]}),Object(o.jsx)(O,{preloader:t,disabled:t,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})},he={login:"/login",registration:"/registration",order:"/main/order",profile:"/main/profile"},xe=[{path:he.login,exact:!0,component:function(){return Object(o.jsx)(i,{title:"\u0412\u043e\u0439\u0442\u0438",children:Object(o.jsx)(re,{})})}},{path:he.registration,exact:!1,component:function(){return Object(o.jsx)(i,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",children:Object(o.jsx)(ce,{})})}}],pe=[{path:he.order,exact:!0,component:function(){var e=q(),t=e.fetchAddressList,r=e.fetchCard,c=Object(h.c)((function(e){return Q(e.order)})),a=Object(h.c)((function(e){return te(e.profile)})),l=Object(s.g)();return Object(n.useState)((function(){t(),r()}),[]),Object(o.jsx)("div",{className:"order",children:a||localStorage.getItem(ue.IS_CARD)?0===c.length?Object(o.jsx)(ie,{}):Object(o.jsx)(le,{}):Object(o.jsx)(i,{children:Object(o.jsxs)("div",{className:"order-add",children:[Object(o.jsx)("h2",{className:"order-add__title",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(o.jsx)("p",{className:"order-add__descr",children:"\u0423 \u0412\u0430\u0441 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u0435 \u043d\u0430 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e \u043a\u0430\u0440\u0442\u0435. \u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f, \u0412\u044b \u0441\u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438"}),Object(o.jsx)(O,{onClick:function(){return l.push("/main/profile")},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})]})})})}},{path:he.profile,exact:!1,component:function(){var e=Object(h.c)((function(e){return X(e.profile)})),t=Object(s.g)(),r=q().setSuccess;return Object(o.jsx)("div",{className:"profile",children:Object(o.jsx)("div",{className:e?"profile__alert":"profile__form-container",children:Object(o.jsx)(i,{children:Object(o.jsxs)("div",{className:"profile__content",children:[Object(o.jsx)("h2",{className:"profile__title",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(o.jsx)("p",{className:"profile__description",children:e?"\u041f\u043b\u0430\u0442\u0451\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438.":"\u0412\u0432\u0434\u0435\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),e?Object(o.jsx)(O,{onClick:function(){t.push("/main/order"),r(!1)},children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043a\u0430\u0440\u0442\u0443"}):Object(o.jsx)(fe,{})]})})})})}}],ge=(r(160),function(e){var t=e.children;return Object(o.jsxs)("div",{className:"auth-container",children:[Object(o.jsx)("div",{className:"auth-lc",children:Object(o.jsx)("img",{src:"".concat("/loft-taxi","/images/logo-v.svg"),alt:"Loft taxi",className:"auth-logo"})}),Object(o.jsx)("div",{className:"auth-rc",style:{backgroundImage:"url(".concat("/loft-taxi","/images/map.png)")},children:t})]})}),ve=(r(161),function(){var e=q().logout;return Object(o.jsx)("header",{className:"header",children:Object(o.jsxs)("nav",{className:"navbar",children:[Object(o.jsx)("div",{className:"navbar__brand",children:Object(o.jsx)("img",{src:"".concat("/loft-taxi","/images/logo-h.svg"),alt:"Loft taxi"})}),Object(o.jsxs)("ul",{className:"navbar__list",children:[Object(o.jsx)("li",{className:"navbar__item",children:Object(o.jsx)(m.c,{to:"/main/order",activeClassName:"navbar__link--active",className:"navbar__link",children:"\u041a\u0430\u0440\u0442\u0430"})}),Object(o.jsx)("li",{className:"navbar__item",children:Object(o.jsx)(m.c,{to:"/main/profile",activeClassName:"navbar__link--active",className:"navbar__link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(o.jsx)("li",{className:"navbar__item",children:Object(o.jsx)("a",{href:"#",onClick:function(t){t.preventDefault(),e(),localStorage.clear()},className:"navbar__link",children:"\u0412\u044b\u0439\u0442\u0438"})})]})]})})}),Se=(r(162),r(88)),ye=r.n(Se),_e=function(e){var t=e.children,r=Object(n.useRef)(null),c=Object(n.useRef)(null),a=Object(n.useState)(30.319814),s=Object(ae.a)(a,2),i=s[0],l=s[1],u=Object(n.useState)(59.886215),j=Object(ae.a)(u,2),d=j[0],b=j[1],O=Object(n.useState)(9),m=Object(ae.a)(O,2),f=m[0],x=m[1],p=Object(h.c)((function(e){return Q(e.order)}));return Object(n.useEffect)((function(){ye.a.accessToken="pk.eyJ1IjoiZC10b3JiYWV2IiwiYSI6ImNrdGNsMHh5ZDI2ejUydm45NzVubWdpZXIifQ.ZCX_RjdS6DGeZs7UsC54OA",c.current||(c.current=new ye.a.Map({container:r.current,style:"mapbox://styles/mapbox/light-v10",center:[i,d],zoom:f}))})),Object(n.useEffect)((function(){c.current&&c.current.on("move",(function(){l(c.current.getCenter().lng.toFixed(4)),b(c.current.getCenter().lat.toFixed(4)),x(c.current.getZoom().toFixed(2))}))})),Object(n.useEffect)((function(){!function(e,t){0!==t.length?(e.flyTo({center:t[0],zoom:15}),e.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}})):e.getLayer("route")&&(e.removeLayer("route"),e.removeSource("route"),e.flyTo({center:[i,d],zoom:9}))}(c.current,p)}),[p]),Object(o.jsxs)("main",{className:"map-layout",children:[t,Object(o.jsx)("div",{ref:r,className:"map-container"})]})},Ne=function(){var e=Object(h.c)((function(e){return J(e.auth)})),t=q().login;return Object(n.useEffect)((function(){localStorage.getItem(ue.AUTH)&&t()}),[]),Object(o.jsx)(o.Fragment,{children:e?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ve,{}),Object(o.jsx)(_e,{children:Object(o.jsxs)(s.d,{children:[pe.map((function(e){var t=e.path,r=e.exact,n=e.component;return Object(o.jsx)(s.b,{path:t,exact:r,component:n},t)})),Object(o.jsx)(s.a,{to:he.order})]})})]}):Object(o.jsx)(ge,{children:Object(o.jsxs)(s.d,{children:[xe.map((function(e){var t=e.path,r=e.exact,n=e.component;return Object(o.jsx)(s.b,{path:t,exact:r,component:n},t)})),Object(o.jsx)(s.a,{to:he.login})]})})})},Ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,246)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},we=r(117),Ee=r(120),ke={isLoggedIn:!1,isLoading:!1,error:null},Re={card:null,isSuccess:!1,error:"",isLoading:!1},Te={addresses:[],coordinates:[],isLoading:!1},Ie={isRegisterIn:!1,isLoading:!1,error:null},Le={auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case p:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case v:return Object(l.a)(Object(l.a)({},e),{},{isLoggedIn:!0,isLoading:!1,error:null});case S:return Object(l.a)(Object(l.a)({},e),{},{isLoggedIn:!1});case g:return Object(l.a)(Object(l.a)({},e),{},{error:n,isLoading:!1});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case _:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case w:return Object(l.a)(Object(l.a)({},e),{},{isSuccess:n,isLoading:!1});case E:return Object(l.a)(Object(l.a)({},e),{},{error:n});case C:return Object(l.a)(Object(l.a)({},e),{},{card:n});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case I:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case R:return Object(l.a)(Object(l.a)({},e),{},{addresses:n});case L:return Object(l.a)(Object(l.a)({},e),{},{coordinates:n,isLoading:!1});default:return e}},registration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case F:return Object(l.a)(Object(l.a)({},e),{},{isLoading:!0});case D:return Object(l.a)(Object(l.a)({},e),{},{isRegisterIn:!0,isLoading:!1,error:null});case U:return Object(l.a)(Object(l.a)({},e),{},{error:n,isLoading:!1,isRegisterIn:!1});default:return e}}},Ae=r(9),Fe=r.n(Ae),De=r(14),Ue=r(118),He=r.n(Ue).a.create({baseURL:"".concat("https://loft-taxi.glitch.me")}),We=function(e){return He.post("/auth",e)},qe=function(e){return He.post("/register",e)},Me=function(){return He.get("card?token=".concat(localStorage.getItem(ue.ACCESS_TOKEN)))},Pe=function(e){return He.post("/card",e)},ze=function(){return He.get("/addressList")},Ge=function(e){return He.get("/route?address1=".concat(e.from,"&address2=").concat(e.to))},Ze=Fe.a.mark(Je),Be=Fe.a.mark(Ye),Ke=function(e){localStorage.setItem(ue.ACCESS_TOKEN,e),localStorage.setItem(ue.AUTH,"true")};function Je(e){var t,r;return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(De.b)(We,e.payload);case 2:if(t=n.sent,!(r=t.data).success){n.next=11;break}return n.next=7,Object(De.b)(Ke,r.token);case 7:return n.next=9,Object(De.c)(y.login());case 9:n.next=13;break;case 11:return n.next=13,Object(De.c)(y.setError(r.error));case 13:case"end":return n.stop()}}),Ze)}function Ye(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)(p,Je);case 2:case"end":return e.stop()}}),Be)}var Ve=Fe.a.mark(et),Xe=Fe.a.mark(tt),$e=Fe.a.mark(rt),Qe=function(){localStorage.setItem(ue.IS_CARD,"true")};function et(e){var t,r;return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(De.b)(Pe,e.payload);case 3:if(t=n.sent,!(r=t.data).success){n.next=12;break}return n.next=8,Object(De.c)(k.setSuccess(!0));case 8:return n.next=10,Object(De.b)(Qe);case 10:n.next=14;break;case 12:return n.next=14,Object(De.c)(k.setError(r.error));case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:case"end":return n.stop()}}),Ve,null,[[0,16]])}function tt(){var e,t;return Fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(De.b)(Me);case 3:return e=r.sent,t=e.data,r.next=7,Object(De.b)(Qe);case 7:if(t.hasOwnProperty("success")){r.next=10;break}return r.next=10,Object(De.c)(k.setUserCard(t));case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.log(r.t0);case 15:case"end":return r.stop()}}),Xe,null,[[0,12]])}function rt(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)(_,et);case 2:return e.next=4,Object(De.d)(N,tt);case 4:case"end":return e.stop()}}),$e)}var nt=Fe.a.mark(ot),ct=Fe.a.mark(it),at=Fe.a.mark(lt),st=Fe.a.mark(ut);function ot(){var e,t;return Fe.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(De.b)(ze);case 3:return e=r.sent,t=e.data,r.next=7,Object(De.c)(A.setAddresses(t.addresses));case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0);case 12:case"end":return r.stop()}}),nt,null,[[0,9]])}function it(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)(T,ot);case 2:case"end":return e.stop()}}),ct)}function lt(e){var t,r;return Fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(De.b)(Ge,e.payload);case 3:return t=n.sent,r=t.data,n.next=7,Object(De.c)(A.setRoutes(r));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),at,null,[[0,9]])}function ut(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)(I,lt);case 2:case"end":return e.stop()}}),st)}var jt=Fe.a.mark(bt),dt=Fe.a.mark(Ot);function bt(e){var t,r,n;return Fe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,Object(De.b)(qe,t);case 4:if(r=c.sent,!(n=r.data).success){c.next=11;break}return c.next=9,Object(De.c)(H.fetchRegistration());case 9:c.next=13;break;case 11:return c.next=13,Object(De.c)(H.setError(n.error));case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(1),console.log(c.t0);case 18:case"end":return c.stop()}}),jt,null,[[1,15]])}function Ot(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.d)(F,bt);case 2:case"end":return e.stop()}}),dt)}var mt=Fe.a.mark(ft);function ft(){return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(De.a)([Ye(),rt(),it(),ut(),Ot()]);case 2:case"end":return e.stop()}}),mt)}var ht=Object(Ee.a)(),xt=Object(x.combineReducers)(Le),pt=Object(x.createStore)(xt,Object(we.composeWithDevTools)(Object(x.applyMiddleware)(ht)));ht.run(ft),a.a.render(Object(o.jsx)(h.a,{store:pt,basename:"/loft-taxi",children:Object(o.jsx)(m.a,{children:Object(o.jsx)(Ne,{})})}),document.getElementById("root")),Ce()}},[[199,1,2]]]);
//# sourceMappingURL=main.db76581a.chunk.js.map